#!{{ lookPath "bash" }}

OBSIDIAN_USER_FLAGS_FILE="${XDG_CONFIG_HOME:-$HOME/.config}/obsidian/user-flags.conf"

# Allow users to override command-line options
if [[ -f "${OBSIDIAN_USER_FLAGS_FILE}" ]]; then
   OBSIDIAN_USER_FLAGS=$(grep -v '^#' "$OBSIDIAN_USER_FLAGS_FILE")
fi

# Launch
{{- if eq .chezmoi.osRelease.id "gentoo" }}
/opt/Obsidian/obsidian $OBSIDIAN_USER_FLAGS
{{- else if eq .chezmoi.osRelease.id "arch" }}
exec electron /usr/lib/obsidian/app.asar $OBSIDIAN_USER_FLAGS
{{- end }}
